% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/winratiosim.R
\name{winratiosim}
\alias{winratiosim}
\title{Simulate Hierarchical Win Ratio Trials}
\usage{
winratiosim(
  nsim,
  N,
  Randomization.ratio,
  alpha.JFM,
  theta.JFM,
  lambda_trt,
  lambda_ctl,
  ann.icr_trt,
  ann.icr_ctl,
  xbase_trt,
  xfinal_trt,
  xbase_ctl,
  xfinal_ctl,
  sd.delta.x_trt,
  sd.delta.x_ctl,
  censorrate_trt,
  censorrate_ctl,
  nc = 1
)
}
\arguments{
\item{nsim}{Integer. Number of simulated trials to run.}

\item{N}{Integer. Total number of subjects in a trial (across both arms).}

\item{Randomization.ratio}{Numeric vector of length 2 indicating the treatment-to-control allocation ratio (e.g., \code{c(1, 1)} for 1:1 randomization).}

\item{alpha.JFM}{Numeric. Alpha parameter for the joint frailty model.}

\item{theta.JFM}{Numeric. Theta parameter for the joint frailty model.}

\item{lambda_trt}{Numeric. Event rate for the treatment group.}

\item{lambda_ctl}{Numeric. Event rate for the control group.}

\item{ann.icr_trt}{Numeric. Annual intercurrent event rate for the treatment group.}

\item{ann.icr_ctl}{Numeric. Annual intercurrent event rate for the control group.}

\item{xbase_trt}{Numeric. Baseline value of the continuous outcome for the treatment group.}

\item{xfinal_trt}{Numeric. Final value of the continuous outcome for the treatment group.}

\item{xbase_ctl}{Numeric. Baseline value of the continuous outcome for the control group.}

\item{xfinal_ctl}{Numeric. Final value of the continuous outcome for the control group.}

\item{sd.delta.x_trt}{Numeric. Standard deviation for the change in the continuous outcome in the treatment group.}

\item{sd.delta.x_ctl}{Numeric. Standard deviation for the change in the continuous outcome in the control group.}

\item{censorrate_trt}{Numeric. Censoring rate for the treatment group.}

\item{censorrate_ctl}{Numeric. Censoring rate for the control group.}

\item{nc}{Integer. Number of CPU cores to use for parallel processing. Default is 1.}
}
\value{
A named list with the following elements:
\describe{
  \item{df_FS.analysis.summary}{A data frame summarizing functional score win results across simulations.}
  \item{df_WR.analysis.summary}{A data frame summarizing win ratio results across simulations.}
  \item{df_sample.size.summary}{A data frame with the sample sizes used in each arm per simulation.}
  \item{df_Total_probability}{A data frame showing average win/tie/loss probabilities across all simulations.}
  \item{df_Total_count}{A data frame showing average win/tie/loss counts across all simulations.}
}
}
\description{
Simulates replicated trials using a hierarchical win ratio analysis framework with three prioritized outcome layers:
time-to-event (e.g., death), a continuous hospitalization frequency variable, and a continuous quality-of-life score.
The simulation incorporates randomization, joint frailty model parameters, censoring, and covariate progression over time.
Parallel computation is supported to speed up large-scale simulations.
}
\examples{
\dontrun{
power.design_parameters <- list(
  nsim = 10, # nsim = 10000 is the default, nsim = 10 is only for checking the code
  N = 400,
  Randomization.ratio = c(1, 1),
  alpha.JFM = 0, theta.JFM = 1,
  lambda_trt = 0.13, lambda_ctl = 0.15,
  ann.icr_trt = 0.32, ann.icr_ctl = 0.55,
  xbase_trt = 45, xfinal_trt = 45 + 7.5, sd.delta.x_trt = 20,
  xbase_ctl = 45, xfinal_ctl = 45, sd.delta.x_ctl = 20,
  censorrate_trt = 0.2, censorrate_ctl = 0.2,
  nc = 1
)

result <- do.call(winratiosim, power.design_parameters)
result$df_WR.analysis.summary
}

}
\references{
Lee, S.Y. (2025). A note on the sample size formula for a win ratio endpoint. \emph{Statistics in Medicine}.
}
